/*
 * Test keymap for zmk-trackball-threshold module
 */

#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/pointing.h>

// Include test configuration
#include "test.dtsi"

#define DEFAULT 0
#define AML 1

/ {
    keymap {
        compatible = "zmk,keymap";

        default_layer {
            bindings = <
                &kp A    &kp B    &kp C
                &kp D    &kp E    &kp F
                &mo AML  &kp G    &kp H
            >;
        };

        auto_mouse_layer {
            bindings = <
                &mkp LCLK    &mmv MOVE_UP     &mkp RCLK
                &mmv MOVE_LEFT &none          &mmv MOVE_RIGHT
                &trans       &mmv MOVE_DOWN   &none
            >;
        };
    };
};

// Test input processor configuration
/ {
    // Temporary layer processor for AML
    zip_temp_layer: zip_temp_layer {
        compatible = "zmk,input-processor-temp-layer";
        #input-processor-cells = <2>;
        require-prior-idle-ms = <150>;
    };
};

// Test trackball listener with threshold processor
/ {
    test_trackball_listener {
        compatible = "zmk,input-listener";
        // device = <&test_trackball>; // Would reference actual trackball device
        
        // Test with threshold processor first, then temp layer
        input-processors = <&zip_trackball_threshold>, <&zip_temp_layer AML 30000>;
    };
}; 